# Changelog: Environment Variables Management

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ `.env` —Ñ–∞–π–ª–∞ –Ω–µ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ shell –æ–∫—Ä—É–∂–µ–Ω–∏–∏, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –ø—Ä–æ–±–ª–µ–º—ã:
- `echo $UPSCALE_CONCURRENCY` –≤–æ–∑–≤—Ä–∞—â–∞–ª –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ `upscale_settings.json` –∏ –º–æ–≥–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `.env`
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É `.env` –∏ JSON —Ñ–∞–π–ª–∞–º–∏
- –°–ª–æ–∂–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –£–ø—Ä–æ—â–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚ùå –£–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `upscale_settings.json` 
- ‚úÖ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª
- ‚úÖ –ù–∏–∫–∞–∫–æ–≥–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. –ù–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### `load_env.sh`
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ `.env` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ shell:
```bash
source load_env.sh
echo $UPSCALE_CONCURRENCY  # —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

#### `start_backend_with_env.sh`
–£–ª—É—á—à–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –í—ã–≤–æ–¥–∏—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç uvicorn

#### `check_env.py`
–£—Ç–∏–ª–∏—Ç–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è (—Å –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π —Å–µ–∫—Ä–µ—Ç–æ–≤)
- –í—ã—è–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### `cleanup_old_config.py`
–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö JSON —Ñ–∞–π–ª–æ–≤:
- –£–¥–∞–ª—è–µ—Ç `upscale_settings.json`
- –°–æ–∑–¥–∞–µ—Ç backup –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º

### 3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

#### `app/upscale_config.py`
- –£–±—Ä–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å JSON —Ñ–∞–π–ª–∞–º–∏
- –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ—Ä—É—Ç—Å—è –ø—Ä—è–º–æ –∏–∑ `os.getenv()`
- –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### `app/main.py`
- API `/api/upscale/settings` —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ read-only
- PUT endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:
```bash
git pull
python cleanup_old_config.py  # —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ JSON —Ñ–∞–π–ª—ã
./start_backend_with_env.sh    # –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
git pull
python cleanup_old_config.py
./start_backend_with_env.sh
```

## üîß –ù–æ–≤—ã–π workflow

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `.env` —Ñ–∞–π–ª
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å `./start_backend_with_env.sh`
3. –ì–æ—Ç–æ–≤–æ! ‚úÖ

### –û—Ç–ª–∞–¥–∫–∞:
1. `python check_env.py` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
2. `source load_env.sh` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ shell –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. `echo $VARIABLE_NAME` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –û–¥–Ω–æ –º–µ—Å—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ - `.env` —Ñ–∞–π–ª
2. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–Ω—ã –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
3. **–û—Ç–ª–∞–¥–∫–∞**: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ shell —á–µ—Ä–µ–∑ `source load_env.sh`
4. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ù–µ—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
5. **–°–∫–æ—Ä–æ—Å—Ç—å**: –ù–µ—Ç –ª–∏—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

## üóÇ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

- `load_env.sh` - –∑–∞–≥—Ä—É–∑–∫–∞ .env –≤ shell
- `start_backend_with_env.sh` - –∑–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `check_env.py` - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- `cleanup_old_config.py` - –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö JSON —Ñ–∞–π–ª–æ–≤
- `ENV_MANAGEMENT.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- `CHANGELOG_ENV.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

## üóë –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `sync_env_settings.py` - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω
- `upscale_settings.json` - —É–±—Ä–∞–Ω –∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ .backup)

---

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–µ–ø–µ—Ä—å `echo $UPSCALE_CONCURRENCY` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ—Å–ª–µ `source load_env.sh`, –∞ –≤—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ —á–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª! üéâ